{"ast":null,"code":"import * as React from 'react';\nimport * as THREE from 'three';\nimport { useThree } from '@react-three/fiber';\nimport { Environment } from './Environment.js';\nimport { ContactShadows } from './ContactShadows.js';\nconst presets = {\n  rembrandt: {\n    main: [1, 2, 1],\n    fill: [-2, -0.5, -2]\n  },\n  portrait: {\n    main: [-1, 2, 0.5],\n    fill: [-1, 0.5, -1.5]\n  },\n  upfront: {\n    main: [0, 2, 1],\n    fill: [-1, 0.5, -1.5]\n  },\n  soft: {\n    main: [-2, 4, 4],\n    fill: [-1, 0.5, -1.5]\n  }\n};\nfunction Stage({\n  children,\n  controls,\n  shadows = true,\n  adjustCamera = true,\n  environment = 'city',\n  contactShadow = true,\n  intensity = 1,\n  preset = 'rembrandt',\n  shadowBias = 0,\n  contactShadowBlur = 2,\n  contactShadowOpacity = 0.5,\n  ...props\n}) {\n  const config = presets[preset];\n  const camera = useThree(state => state.camera); // @ts-expect-error new in @react-three/fiber@7.0.5\n\n  const defaultControls = useThree(state => state.controls);\n  const outer = React.useRef(null);\n  const inner = React.useRef(null);\n  const [{\n    radius,\n    width,\n    height\n  }, set] = React.useState({\n    radius: 0,\n    width: 0,\n    height: 0\n  });\n  React.useLayoutEffect(() => {\n    outer.current.position.set(0, 0, 0);\n    outer.current.updateWorldMatrix(true, true);\n    const box3 = new THREE.Box3().setFromObject(inner.current);\n    const center = new THREE.Vector3();\n    const sphere = new THREE.Sphere();\n    const height = box3.max.y - box3.min.y;\n    const width = box3.max.x - box3.min.x;\n    box3.getCenter(center);\n    box3.getBoundingSphere(sphere);\n    set({\n      radius: sphere.radius,\n      width,\n      height\n    });\n    outer.current.position.set(-center.x, -center.y + height / 2, -center.z);\n  }, [children]);\n  React.useLayoutEffect(() => {\n    if (adjustCamera) {\n      const y = radius / (height > width ? 1.5 : 2.5);\n      camera.position.set(0, radius * 0.5, radius * 2.5);\n      camera.near = 0.1;\n      camera.far = Math.max(5000, radius * 4);\n      camera.lookAt(0, y, 0);\n      const ctrl = defaultControls || (controls == null ? void 0 : controls.current);\n      if (ctrl) {\n        ctrl.target.set(0, y, 0);\n        ctrl.update();\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [defaultControls, radius, height, width, adjustCamera]);\n  return /*#__PURE__*/React.createElement(\"group\", props, /*#__PURE__*/React.createElement(\"group\", {\n    ref: outer\n  }, /*#__PURE__*/React.createElement(\"group\", {\n    ref: inner\n  }, children)), contactShadow && /*#__PURE__*/React.createElement(ContactShadows, {\n    \"rotation-x\": Math.PI / 2,\n    opacity: contactShadowOpacity,\n    width: radius * 2,\n    height: radius * 2,\n    blur: contactShadowBlur,\n    far: radius / 2\n  }), environment && /*#__PURE__*/React.createElement(Environment, {\n    preset: environment\n  }), /*#__PURE__*/React.createElement(\"ambientLight\", {\n    intensity: intensity / 3\n  }), /*#__PURE__*/React.createElement(\"spotLight\", {\n    penumbra: 1,\n    position: [config.main[0] * radius, config.main[1] * radius, config.main[2] * radius],\n    intensity: intensity * 2,\n    castShadow: shadows,\n    \"shadow-bias\": shadowBias\n  }), /*#__PURE__*/React.createElement(\"pointLight\", {\n    position: [config.fill[0] * radius, config.fill[1] * radius, config.fill[2] * radius],\n    intensity: intensity\n  }));\n}\nexport { Stage };","map":{"version":3,"names":["React","THREE","useThree","Environment","ContactShadows","presets","rembrandt","main","fill","portrait","upfront","soft","Stage","children","controls","shadows","adjustCamera","environment","contactShadow","intensity","preset","shadowBias","contactShadowBlur","contactShadowOpacity","props","config","camera","state","defaultControls","outer","useRef","inner","radius","width","height","set","useState","useLayoutEffect","current","position","updateWorldMatrix","box3","Box3","setFromObject","center","Vector3","sphere","Sphere","max","y","min","x","getCenter","getBoundingSphere","z","near","far","Math","lookAt","ctrl","target","update","createElement","ref","PI","opacity","blur","penumbra","castShadow"],"sources":["C:/Users/Work/node_modules/@react-three/drei/core/Stage.js"],"sourcesContent":["import * as React from 'react';\nimport * as THREE from 'three';\nimport { useThree } from '@react-three/fiber';\nimport { Environment } from './Environment.js';\nimport { ContactShadows } from './ContactShadows.js';\n\nconst presets = {\n  rembrandt: {\n    main: [1, 2, 1],\n    fill: [-2, -0.5, -2]\n  },\n  portrait: {\n    main: [-1, 2, 0.5],\n    fill: [-1, 0.5, -1.5]\n  },\n  upfront: {\n    main: [0, 2, 1],\n    fill: [-1, 0.5, -1.5]\n  },\n  soft: {\n    main: [-2, 4, 4],\n    fill: [-1, 0.5, -1.5]\n  }\n};\nfunction Stage({\n  children,\n  controls,\n  shadows = true,\n  adjustCamera = true,\n  environment = 'city',\n  contactShadow = true,\n  intensity = 1,\n  preset = 'rembrandt',\n  shadowBias = 0,\n  contactShadowBlur = 2,\n  contactShadowOpacity = 0.5,\n  ...props\n}) {\n  const config = presets[preset];\n  const camera = useThree(state => state.camera); // @ts-expect-error new in @react-three/fiber@7.0.5\n\n  const defaultControls = useThree(state => state.controls);\n  const outer = React.useRef(null);\n  const inner = React.useRef(null);\n  const [{\n    radius,\n    width,\n    height\n  }, set] = React.useState({\n    radius: 0,\n    width: 0,\n    height: 0\n  });\n  React.useLayoutEffect(() => {\n    outer.current.position.set(0, 0, 0);\n    outer.current.updateWorldMatrix(true, true);\n    const box3 = new THREE.Box3().setFromObject(inner.current);\n    const center = new THREE.Vector3();\n    const sphere = new THREE.Sphere();\n    const height = box3.max.y - box3.min.y;\n    const width = box3.max.x - box3.min.x;\n    box3.getCenter(center);\n    box3.getBoundingSphere(sphere);\n    set({\n      radius: sphere.radius,\n      width,\n      height\n    });\n    outer.current.position.set(-center.x, -center.y + height / 2, -center.z);\n  }, [children]);\n  React.useLayoutEffect(() => {\n    if (adjustCamera) {\n      const y = radius / (height > width ? 1.5 : 2.5);\n      camera.position.set(0, radius * 0.5, radius * 2.5);\n      camera.near = 0.1;\n      camera.far = Math.max(5000, radius * 4);\n      camera.lookAt(0, y, 0);\n      const ctrl = defaultControls || (controls == null ? void 0 : controls.current);\n\n      if (ctrl) {\n        ctrl.target.set(0, y, 0);\n        ctrl.update();\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [defaultControls, radius, height, width, adjustCamera]);\n  return /*#__PURE__*/React.createElement(\"group\", props, /*#__PURE__*/React.createElement(\"group\", {\n    ref: outer\n  }, /*#__PURE__*/React.createElement(\"group\", {\n    ref: inner\n  }, children)), contactShadow && /*#__PURE__*/React.createElement(ContactShadows, {\n    \"rotation-x\": Math.PI / 2,\n    opacity: contactShadowOpacity,\n    width: radius * 2,\n    height: radius * 2,\n    blur: contactShadowBlur,\n    far: radius / 2\n  }), environment && /*#__PURE__*/React.createElement(Environment, {\n    preset: environment\n  }), /*#__PURE__*/React.createElement(\"ambientLight\", {\n    intensity: intensity / 3\n  }), /*#__PURE__*/React.createElement(\"spotLight\", {\n    penumbra: 1,\n    position: [config.main[0] * radius, config.main[1] * radius, config.main[2] * radius],\n    intensity: intensity * 2,\n    castShadow: shadows,\n    \"shadow-bias\": shadowBias\n  }), /*#__PURE__*/React.createElement(\"pointLight\", {\n    position: [config.fill[0] * radius, config.fill[1] * radius, config.fill[2] * radius],\n    intensity: intensity\n  }));\n}\n\nexport { Stage };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}